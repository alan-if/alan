#!/bin/bash
# Move the files with pattern $1 replacing it for the string $2
if [ $# -ne 2 ] ; then
  echo "Usage: `basename $0` <string> <replaced>"
  echo "where"
  echo "    <string>   : the string that will be matched to existing filenames with *<string>*"
  echo "    <replaced> : the string with which to replace it in the file names"
  exit
fi
for f in *$1*
do
  if [ -f "$1".expected ]
  then
    sed -e _$f_${f//$1/$2}_s $f
  fi
  git mv $f ${f//$1/$2}
done
